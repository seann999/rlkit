version: 0
os: ubuntu==16.04
features:
- cuda==8.0
- python==3
- chainer==5.2.0
- cudnn==5.1
- nccl==1.3.4
- cupy==1.0.1
- opencv==3.2.0
- pip:cython==0.29.5
- pip:joblib==0.9.4
- pip:lockfile==0.12.2
- pip:mako==1.0.6
- pip:matplotlib==2.0.2
#- pip:mkl==2018.0.2  # Need to add explicit dependence for pytorch
- pip:numba==0.35.0
- pip:numpy==1.11.3
- pip:path.py==10.3.1
- pip:python-dateutil==2.6.1
- pip:torch==1.0.1
- pip:tensorflow==1.12.0
#- pip:pytorchi==0.4.1
- pip:scipy==1.0.1
- apt:patchelf
- pip:cloudpickle==0.5.2
- pip:gym[atari,mujoco]==0.10.5
- pip:gitpython==2.1.7
- pip:gtimer==1.0.0b5
- pip:pygame==1.9.2
- apt:swig
- apt:libglfw3-dev
- pip:glfw==1.7.1
- pip:jsonmerge==1.5.2
- custom:pybox2d
- custom:mujoco150
custom_defs:
  pybox2d:
    commands: |
      git clone https://github.com/pybox2d/pybox2d
      cd pybox2d
      python3 setup.py build
      python3 setup.py install
  patchelf:
    commands: |
      # https://github.com/openai/mujoco-py/issues/147
      add-apt-repository ppa:jamesh/snap-support
      apt-get update
      apt install patchelf
    dependencies:
    # software-properties-common is necessary for add-apt-repository
    - apt:software-properties-common
  mujoco150:
    # Put mjkey.txt at /mjkey/mjkey.txt
    commands: |
      wget https://www.roboti.us/download/mjpro150_linux.zip
      mkdir $HOME/.mujoco
      chown -R user $HOME/.mujoco
      unzip mjpro150_linux.zip -d $HOME/.mujoco
      ln -s /mjkey/mjkey.txt $HOME/.mujoco/mjkey.txt
      rm mjpro150_linux.zip
      # Files are generated under mujoco_py/generated when imported.
      # mujoco_py is installed by root while the user command is executed by
      # user, so it will raise an permission error without chown here.
      chown -R user /usr/local/lib/python3.5/dist-packages/mujoco_py/generated
    dependencies:
    - pip:mujoco_py==1.50.1.66
    - apt:zip
    - apt:unzip
    - custom:patchelf
hardware:
- cpu==2
- ram==4096
- disk==1000
- gpu==1
